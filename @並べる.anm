@âèéÊÇËTï¿Ç◊
--Ç≥Ç¬Ç´Ç≥ÇÒÇÃàÍï˚å¸Çâ¸ïœ
--âèéÊÇËÇÇ©ÇØÇƒï¿Ç◊ÇÈ
--ägëÂó¶Ç∆äpìxÇïœÇ¶Ç»Ç™ÇÁÅAìØÇ∂ëæÇ≥ÇÃâèéÊÇËÇÇ©ÇØÇÁÇÍÇÈ
--LuaJitÇ™ïKê{(5.1Ç…ÇÕgotoÇ™Ç»Ç¢ÇÃÇ≈)

--track0:å¬êî,1,50,5,1
--track1:ä‘äu,-1000,1000,0
--track2:äpìx,-720,720,0
--track3:ägëÂó¶ïœâª,-500,500,0
--dialog:ï˚å¸,local axis=0;âÒì],local rot=0;ëoï˚å¸/chk,local sou=0;Ñ§ê¸ëŒèÃ/chk,local sim=0;ïâÇÃägëÂó¶/chk,local minus=0;âèéÊÇË,local futi=2;Ñ§ÉTÉCÉY,local h_size=10;Ñ§Ç⁄Ç©Çµ,local h_bokeh=1;Ñ§ÉøäÓèÄ,local h_alp=128;Ñ§çáê¨ó ,local h_add=-100;Ñ§êF/col,local col=0x0;

local n=obj.track0
local l=obj.track1
local r=obj.track2+90
local w=obj.w
local h=obj.h
local aa=0
local bb=n-1

--ägëÂó¶Ç∆äpìxïœçXóp
local sp=obj.track3
local s=obj.getvalue("zoom")
local si=s/100
local si_fix=si
local rz=obj.getvalue("rz")
local ri=rz

--âèéÊÇËTóp
local zoom=obj.zoom*obj.getvalue("zoom")/100
local h_size_fix=h_size
local h_bokeh_fix=h_bokeh
local h_acc = 0;
local param = "local col1="..col..";local col2="..col..";local Lgr=0;local Mis=0;local MiV=25;local MiA=25;local mode=0;"

if(futi>0) then
  obj.copybuffer("cache:origin_su","obj")
end

if(sou==1) then
  aa=-n+1 bb=n-1
  if(sim==0) then
    si=si+sp/100*aa
  else
    si=si-sp/100*aa
  end
end



for i=aa,bb do
  local sin=math.sin(r*math.pi/180)*l*i
  local cos=-math.cos(r*math.pi/180)*l*i
  local cx,cy,z=0,0,0

  si_fix=si
  if(minus==1) then
    if(si<=0) then
      si_fix=si*-1
    end
  elseif (si<0) then
    goto continue
  end

  if(axis<1) then
    cx=sin cy=cos z=0
  elseif(axis<2) then
    cx=sin cy=0 z=cos
  else
    cx=0 cy=cos z=sin
  end

  if(futi>0) then
    obj.copybuffer("obj","cache:origin_su")
    if (futi==2) then
      h_size_fix=h_size/si_fix
      h_bokeh_fix=h_bokeh/si_fix
    end
    obj.effect("ÉAÉjÉÅÅ[ÉVÉáÉìå¯â ","name","âèéÊÇËT","track0",h_size_fix,"track1",h_bokeh_fix,"track2",h_alp,"track3",h_add,"check0",h_acc,"param",param)
  end
  obj.draw(cx,cy,0,si_fix,1,0,0,ri)

  ::continue::
  if (sim==0) or (sou==0) then
    si=si+sp/100
  else
    if (i<0) then
      si=si-sp/100
    else
      si=si+sp/100
    end
  end
  ri=ri+rot
end

if (futi==1) then
  --obj.copybuffer("obj","cache:out")
else
  --obj.copybuffer("obj","cache:out")
end


::fin::
